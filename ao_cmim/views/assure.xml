<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>

		<!-- *********************************** Assures ************************************** -->
		<record id="view_assure_tree" model="ir.ui.view">
			<field name="name">cmim.assure.tree</field>
			<field name="model">cmim.assure</field>
			<field eval="7" name="priority" />
			<field name="arch" type="xml">
				<tree string="Assures">
					<field name="numero" />
					<field name="id_num_famille" />
					<field name="name" />
					<field name="collectivite_id" />
					<field name="date_naissance" />
					<field name="email" />
					<field name="statut" />
				</tree>
			</field>
		</record>
		<record id="view_assure_kanban" model="ir.ui.view">
			<field name="name">cmim.assure.kanban</field>
			<field name="model">cmim.assure</field>
			<field name="priority" eval="1" />
			<field name="arch" type="xml">
				<kanban>
					<field name="name" />
					<field name="collectivite_id" />
					<field name="numero" />
					<templates>
						<t t-name="kanban-box">
							<div class="oe_kanban_global_click o_res_partner_kanban">
								<div class="o_kanban_image">
									<a type="open">
										<img
											t-att-src="kanban_image('my.module', 'image_small', record.id.value)"
											class="oe_kanban_image" />
									</a>
								</div>
								<div class="oe_kanban_details">
									<strong class="oe_partner_heading">
										<field name="name" />
									</strong>

									<ul>
										<li>
											Collectivité:
											<field name="collectivite_id"></field>
										</li>
										<li>
											ID:
											<field name="numero" />
										</li>
									</ul>
								</div>
							</div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>
		<record id="assure_search_view" model="ir.ui.view">
			<field name="name">cmim.assure.search</field>
			<field name="model">cmim.assure</field>
			<field name="arch" type="xml">
				<search string="Assure filtre">
					<field name="statut" />
					<field name="is_normal" />
					<group expand="0" string="Group By">
						<filter name="collectivite_id" string="Collectivité"
							domain="[]" context="{'group_by':'collectivite_id'}" />
						<filter name="statut" string="Statut" domain="[]"
							context="{'group_by':'statut'}" />
					</group>
					<filter name="statut" string="Statut" icon="terp-stock_symbol-selection"
						domain-filter="[('statut', '=', 
					self)]" />

				</search>
			</field>
		</record>
		<record id="view_assure_form" model="ir.ui.view">
			<field name="name">cmim.assure.form</field>
			<field name="model">cmim.assure</field>
			<field name="priority" eval="1" />
			<field name="arch" type="xml">
				<form string="Assurés">
					<sheet>
						<div class="oe_button_box" name="button_box">
							<button name="get_declarations" type="object" string="Déclarations"
								class="oe_inline oe_stat_button" icon="fa-align-justify" />
						</div>
						<field name="image" widget='image' class="oe_avatar"
							options='{"preview_image": "image_medium", "size": [90, 90]}' />
						<div class="oe_title">
							<h1>
								<field name="name" default_focus="1" placeholder="Name" />
							</h1>
							<h2>
								<field name="numero" default_focus="1" placeholder="Numéro" />
								<field name="code_compose" default_focus="1" placeholder="Code Composé"
									invisible="1" />
							</h2>
						</div>
						<group>
							<group>
								<field name="statut" />
								<field name="collectivite_id" />
								<field name="epoux_id" />
								<field name="id_num_famille" />
								<field name="date_naissance" />
							</group>
							<group>

								<field name="phone" widget="phone" />
								<field name="mobile" widget="phone" />
								<label for="street" string="Address" />
								<div class="o_address_format">
									<field name="street" placeholder="Street..." class="o_address_street" />
									<field name="city" placeholder="City" class="o_address_city" />
									<field name="state_id" class="o_address_state"
										placeholder="State" />
									<field name="zip" placeholder="ZIP" class="o_address_zip" />
									<field name="country_id" placeholder="Country" class="o_address_country"
										options='{"no_open": True, "no_create": True}' />
								</div>
							</group>
						</group>
					</sheet>
				</form>
			</field>
		</record>
		<record id="action_assure" model="ir.actions.act_window">
			<field name="name">Assurés </field>
			<field name="res_model">cmim.assure</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form,kanban</field>
			<field name="domain" eval="[('parent_id','=',False)]" />
			<field name="context">{}</field>
<!-- 			"search_default_statut":1 -->
			<field name="view_id" ref="view_assure_kanban" />
			<field name="search_id" ref="assure_search_view" />
		</record>
	</data>
</odoo>